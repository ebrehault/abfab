abfab Docs
==================================

This application was generated by Guillotina's application cookiecutter.

Dependencies
------------

Python >= 3.7


Installation
------------

This example will use python virtual env::

  python3.7 -m venv .
  ./bin/pip install -e .


Running
-------

Most simple way to get running::

    cd guillotina/abfab
    guillotina


Running Postgresql Server:

    docker run -e POSTGRES_DB=guillotina -e POSTGRES_USER=guillotina -p 127.0.0.1:5432:5432 --name postgres postgres:9.6

Create contents
---------------

    curl -i -X POST http://localhost:8080/db/ -H 'Accept: application/json' -H 'Content-Type: application/json' --data-raw '{"@type": "Container", "description": "My abfab app", "id": "my-app", "title": "MyApp"}' --user root:root
    curl http://localhost:8080/db/my-app/@addons --user root:root -X POST -H 'Accept: application/json' --data-raw '{
        "id": "dbusers"
    }'

    curl -i -X POST http://localhost:8080/db/my-app/ -H 'Accept: application/json' -H 'Content-Type: application/json' --data-raw '{"@type": "Directory", "id": "pack1"}' --user root:root
    curl -i -X POST http://localhost:8080/db/my-app/pack1/ -H 'Accept: application/json' -H 'Content-Type: application/json' --data-raw '{"@type": "File", "id": "test.js", "source": "console.log('yep');"}' --user root:root
    curl -i -X POST http://localhost:8080/db/my-app/pack1/ -H 'Accept: application/json' -H 'Content-Type: application/json' --data-raw '{"@type": "File", "id": "test.js"}' --user root:root
    curl -i -X PATCH http://localhost:8080/db/my-app/pack1/test.js/@upload/file -H 'Accept: application/json' --data-raw "console.log('yepa');" -H 'X-UPLOAD-FILENAME: test.js' -H 'Content-Type: application/octet-stream' --user root:root
    curl -i -X DELETE http://localhost:8080/db/my-app/libs --user root:root
    curl -i http://localhost:8080/db/my-app/pack1/test.js
    curl -i -X POST http://localhost:8080/db/my-app/ -H 'Accept: application/json' -H 'Content-Type: application/json' --data-raw '{"@type": "Content", "id": "content2", "view": "/views/component/render.svelte", "data": {"year": 1994}}' --user root:root
    curl -i -X POST http://localhost:8080/db/my-app/ -H 'Accept: application/json' -H 'Content-Type: application/json' --data-raw '{"@type": "Content", "id": "content1", "view": "/views/component/render.svelte", "data": {"year": 1993}}' --user root:root
    curl -i -X PATCH http://localhost:8080/db/my-app/content2 -H 'Accept: application/json' -H 'Content-Type: application/json' --data-raw '{"view": "/views/component/render2.svelte"}' --user root:root
